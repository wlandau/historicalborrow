[{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement .landau@gmail.com. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://wlandau.github.io/historicalborrow/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://wlandau.github.io/historicalborrow/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 Eli Lilly Company Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"common-notation","dir":"Articles","previous_headings":"Models","what":"Common notation","title":"Methods","text":"yy: vector patient-specific clinical responses continuous outcome variable. Ideally, outcome variable form change baseline, response . outcome raw response, treatment effect meaningful. yijy_{ij}: element yy corresponding study ii patient jj. (X)ij(X)_{ij}: row matrix XX corresponding study ii patient jj. α\\alpha: Vector control group mean parameters, one study. first elements historical studies, last one current study. δ\\delta: Vector study-specific treatment mean parameters. one combination study non-control treatment group. dd: integer index elements δ\\delta. bb: integer index elements β\\beta. β\\beta: Vector study-specific baseline covariate parameters. XαX_\\alpha: matrix control group mean parameters α\\alpha. indicator columns select appropriate element α\\alpha element yy. XδX_\\delta: matrix treatment mean parameters δ\\delta. indicator columns select appropriate element δ\\delta element yy. XβX_\\beta: matrix baseline covariate fixed effect parameters β\\beta. indicator columns select appropriate element β\\beta element yy. σ\\sigma: Vector study-specific residual standard deviations. (⋅)(\\cdot): indicator function.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"model-matrices","dir":"Articles","previous_headings":"Models","what":"Model matrices","title":"Methods","text":"primary model parameterized thus: E(y)=Xαα+Xδδ+Xββ \\begin{aligned} E(y) = X_\\alpha \\alpha + X_\\delta \\delta + X_\\beta \\beta \\end{aligned} , XαX_\\alpha, XδX_\\delta, XβX_\\beta fixed matrices. XβX_\\beta conventional model matrix baseline covariates β\\beta, details explained “Baseline covariates” section . XαX_\\alpha matrix zeroes ones. constructed scalar component α\\alpha mean response control group particular study. Likewise, XδX_\\delta matrix zeroes ones scalar component δ\\delta mean response non-control treatment group particular study. illustrate, let yijky_{ijk} patient ii treatment group jj (j=1j = 1 control group) study kk, let (Xββ)ijk\\left ( X_\\beta \\beta \\right )_{ijk} corresponding scalar element vector XββX_\\beta \\beta. , E(yijk)=(j=1)αk+(j>1)δjk+(Xββ)ijk \\begin{aligned} E(y_{ijk}) = (j = 1) \\alpha_{k} + (j > 1) \\delta_{jk} + \\left ( X_\\beta \\beta \\right )_{ijk} \\end{aligned} parameterization represented compact expression Xαα+Xδδ+XββX_\\alpha \\alpha + X_\\delta \\delta + X_\\beta \\beta model definitions vignette.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"baseline-covariates","dir":"Articles","previous_headings":"Models","what":"Baseline covariates","title":"Methods","text":"baseline covariates model matrix XβX_\\beta adjusts baseline covariates. may contain continuous column baseline binary indicator columns levels user-defined covariates. columns included possible, method automatically drops baseline covariate columns ensure combined model matrix Xi*=[Xα*Xδ*Xβ*]iX_i^* = \\left [ {X_\\alpha}^* \\quad {X_\\delta}^* \\quad {X_\\beta}^* \\right ]_i full rank. (, Xi*X_i^* denotes rows matrix XX corresponding study ii, additional rows dropped corresponding elements yy missing. additional row-dropping based missingness yy ensures identifiability even user supplies complicated many-leveled factors covariates.) choice columns drop Xβi{X_\\beta}_i determined rank pivoting strategy QR decomposition XiX_i using Householder algorithm pivoting (base::qr(), LINPACK routine DQRDC). Separately within study, column XβX_\\beta centered mean 0, possible, scaled variance 1. Scaling ensures priors parameters β\\beta remain relatively diffuse relative input data. Study-level centering ensures α\\alpha parameters truly act unconditional study-specific control group means (opposed conditional subset patients reference level XβX_\\beta), ensures borrowing across α\\alpha components fully presents control group borrowing.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"post-processing","dir":"Articles","previous_headings":"Models","what":"Post-processing","title":"Methods","text":"hb_summary() function post-processes results model. accepts MCMC samples parameters returns estimated marginal means response treatment effect. estimate marginal means response, hb_summary() takes group-level averages posterior samples fitted values dropping covariate adjustment terms model (.e. Xαα+XδδX_\\alpha \\alpha + X_\\delta \\delta). columns XβX_\\beta centered means, choice mathematically equivalent emmeans::emmeans() weights = \"proportional\" (Lenth (2016)).","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"mixture-model","dir":"Articles","previous_headings":"Models","what":"Mixture model","title":"Methods","text":"Functions: hb_sim_mixture() hb_mcmc_mixture() mixture model analyzes data current study, use XαmixtureX_\\alpha^{\\text{mixture}} instead XαX_\\alpha. XαmixtureX_\\alpha^{\\text{mixture}} one-column matrix indicate elements yy part control group current study. historical studies contribute model hyperparameters (mω)({m_\\omega})_i (sω)(s_\\omega)_i. study ii historical study, (mω)({m_\\omega})_i (sω)(s_\\omega)_i posterior mean posterior standard deviation, respectively, mean control group response estimated simple model described later. study ii current study, (mω)({m_\\omega})_i (sω)(s_\\omega)_i chosen mixture component Normal((mω)({m_\\omega})_i, (sω)(s_\\omega)_i) study ii diffuse non-informative. Variable ωi\\omega_i study ii latent variable mixture component ii, index variable π\\pi chooses ωi\\omega_i use current study control group mean α\\alpha. Hyperparameter pωp_\\omega constant vector prior mixture proportions study. posterior histogram π\\pi gives posterior mixture proportions. yij∼indN((Xαmixtureα+Xδδ+Xββ)ij,σ2)α=ωπωi∼indNormal((mω),(sω)i2)π∼Categorical(pω)δd∼indNormal(0,sδ2)βb∼Normal(0,sβ2)σ∼Uniform(0,sσ) \\begin{aligned} & y_{ij}  \\stackrel{\\text{ind}}{\\sim} \\text{N} \\left ( \\left (X_\\alpha^{\\text{mixture}} \\alpha + X_\\delta \\delta + X_\\beta \\beta \\right )_{ij}, \\ \\sigma^2 \\right) \\\\ & \\qquad \\alpha = \\omega_{\\pi} \\\\ & \\qquad \\qquad \\omega_i \\stackrel{\\text{ind}}{\\sim} \\text{Normal}(({m_\\omega})_i, (s_\\omega)_i^2) \\\\ & \\qquad \\qquad \\pi \\sim \\text{Categorical}(p_\\omega) \\\\ & \\qquad \\delta_d \\stackrel{\\text{ind}}{\\sim} \\text{Normal} (0, s_\\delta^2) \\\\ & \\qquad \\beta_b \\sim \\text{Normal} (0, s_\\beta^2) \\\\ & \\qquad \\sigma \\sim \\text{Uniform}(0, s_\\sigma) \\end{aligned}","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"hierarchical-model","dir":"Articles","previous_headings":"Models","what":"Hierarchical model","title":"Methods","text":"Functions: hb_sim_hierarchical() hb_mcmc_hierarchical() hb_s_tau() hierarchical model equivalent meta-analytic combined (MAC) approach analyzes data studies shrinks control group means αi\\alpha_i towards common normal distribution mean μ\\mu variance τ2\\tau^2. yij∼N((Xαα+Xδδ+Xββ)ij,σi2)αi∼indNormal(μ,τ2)μ∼Normal(0,sμ2)τ∼fτδd∼indNormal(0,sδ2)βb∼indNormal(0,sβ2)σi∼indUniform(0,sσ) \\begin{aligned} & y_{ij} \\sim \\text{N} \\left( \\left (X_\\alpha \\alpha + X_\\delta \\delta + X_\\beta \\beta \\right )_{ij} , \\ \\sigma_i^2 \\right )\\\\ & \\qquad \\alpha_i \\stackrel{\\text{ind}}{\\sim} \\text{Normal}(\\mu, \\tau^2) \\\\ & \\qquad \\qquad \\mu \\sim \\text{Normal}(0, s_\\mu^2) \\\\ & \\qquad \\qquad \\tau \\sim f_\\tau \\\\ & \\qquad \\delta_d \\stackrel{\\text{ind}}{\\sim} \\text{Normal} (0, s_\\delta^2) \\\\ & \\qquad \\beta_b \\stackrel{\\text{ind}}{\\sim} \\text{Normal} (0, s_\\beta^2) \\\\ & \\qquad \\sigma_i \\stackrel{\\text{ind}}{\\sim} \\text{Uniform}(0, s_\\sigma) \\end{aligned} prior fτf_\\tau τ\\tau critically important : controls prior amount borrowing, prior large influence historical studies data. fτf_\\tau can either flexible half-Student-t distribution dτd_\\tau degrees freedom scale parameter sτs_\\tau: fτ=Student-t(0,sτ,dτ)+ f_\\tau = \\text{Student-t}(0, s_\\tau, d_\\tau)^+  uniform distribution lower bound 0 upper bound sτs_\\tau: fτ=Uniform(0,sτ) f_\\tau = \\text{Uniform}(0, s_\\tau) Following recommendation Gelman (2006), please use half-Student-t number historical studies small consider uniform large numbers historical studies. half-Student-t distribution, role sτs_\\tau parameter equivalent σ\\sigma parameter Student-t parameterization Stan user manual.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"independent-model","dir":"Articles","previous_headings":"Models","what":"Independent model","title":"Methods","text":"Functions: hb_sim_independent() hb_mcmc_independent() independent model hierarchical model, independent control group parameters α\\alpha. use -borrowing benchmark quantify borrowing strength hierarchical model mixture model. yij∼N((Xαα+Xδδ+Xββ)ij,σi2)αi∼indNormal(0,sα2)δd∼indNormal(0,sδ2)βb∼indNormal(0,sβ2)σi∼indUniform(0,sσ) \\begin{aligned} & y_{ij} \\sim \\text{N} \\left( \\left (X_\\alpha \\alpha + X_\\delta \\delta + X_\\beta \\beta \\right )_{ij} , \\ \\sigma_i^2 \\right )\\\\ & \\qquad \\alpha_i \\stackrel{\\text{ind}}{\\sim} \\text{Normal}(0, s_\\alpha^2) \\\\ & \\qquad \\delta_d \\stackrel{\\text{ind}}{\\sim} \\text{Normal} (0, s_\\delta^2) \\\\ & \\qquad \\beta_b \\stackrel{\\text{ind}}{\\sim} \\text{Normal} (0, s_\\beta^2) \\\\ & \\qquad \\sigma_i \\stackrel{\\text{ind}}{\\sim} \\text{Uniform}(0, s_\\sigma) \\end{aligned}","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"pooled-model","dir":"Articles","previous_headings":"Models","what":"Pooled model","title":"Methods","text":"Functions: hb_sim_pool() hb_mcmc_pool() Like independent model, pooled model benchmark quantify borrowing strength hierarchical model mixture model. instead -borrowing independent model, pooled model represents maximum borrowing. Instead XαX_\\alpha, , use XαpoolX_\\alpha^{\\text{pool}}, one column indicate observations belong control group. words, α\\alpha parameters pooled, α\\alpha scalar. yij∼N((Xαpoolα+Xδδ+Xββ)ij,σi2)α∼Normal(0,sα2)δd∼indNormal(0,sδ2)βb∼indNormal(0,sβ2)σi∼indUniform(0,sσ) \\begin{aligned} & y_{ij} \\sim \\text{N} \\left( \\left ( X_\\alpha^{\\text{pool}} \\alpha + X_\\delta \\delta + X_\\beta \\beta \\right )_{ij} , \\ \\sigma_i^2 \\right )\\\\ & \\qquad \\alpha \\sim \\text{Normal}(0, s_\\alpha^2) \\\\ & \\qquad \\delta_d \\stackrel{\\text{ind}}{\\sim} \\text{Normal} (0, s_\\delta^2) \\\\ & \\qquad \\beta_b \\stackrel{\\text{ind}}{\\sim} \\text{Normal} (0, s_\\beta^2) \\\\ & \\qquad \\sigma_i \\stackrel{\\text{ind}}{\\sim} \\text{Uniform}(0, s_\\sigma) \\end{aligned}","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"simple-model","dir":"Articles","previous_headings":"Models","what":"Simple model","title":"Methods","text":"Functions: hb_mcmc_mixture_hyperparameters() mixture model hyperparameters (mω)(m_\\omega)_i (sω)(s_\\omega)_i study ii obtained analyzing control group data study ii simple model . (mω)(m_\\omega)_i (sω)(s_\\omega)_i taken estimated posterior mean posterior standard deviation, respectively, μ\\mu model. y∼Normal(μ,σ2)μ∼Normal(0,sμ2)σ∼Uniform(0,sσ) \\begin{aligned} &y \\sim \\text{Normal}(\\mu, \\sigma^2) \\\\ & \\qquad \\mu \\sim \\text{Normal}(0, s_\\mu^2) \\\\ & \\qquad \\sigma \\sim \\text{Uniform}(0, s_\\sigma) \\end{aligned}","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"borrowing-metrics","dir":"Articles","previous_headings":"","what":"Borrowing metrics","title":"Methods","text":"package supports following metrics quantify borrowing.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"effective-sample-size-ess","dir":"Articles","previous_headings":"Borrowing metrics","what":"Effective sample size (ESS)","title":"Methods","text":"See hb_ess() function implementation. Neuenschwander et al. (2006) posit prior effective sample size metric meta-analytic predictive (MAP) priors. original paper, underlying hierarchical model uses historical controls, hypothetical new study current study interest. historicalborrow, adapt metric hierarchical model also includes control treatment data current study. still define NN number (non-missing) historical control patients can still interpret ESS scale. pooled model, define V0V_0 posterior predictive variance control mean α*\\alpha^* hypothetical new unobserved study. According Neuenschwander et al. (2006), can derived average study-specific variances. practice, estimate V0V_0 using average MCMC samples 1∑σi−2\\frac{1}{\\sum \\sigma_i^{-2}}. V0:=Var(α*|y,τ=0)=1∑σi−2 V_0 := \\text{Var}(\\alpha^* | y, \\tau = 0) = \\frac{1}{\\sum \\sigma_i^{-2}}  hierarchical model, define analogous posterior predictive variance VτV_\\tau using prior distribution Vτ:=Var(α*|y)=∫E[(α*−E(α*|y))2|y]⋅p(α*|μ,τ)⋅p(μ,τ|y)dμdτ V_\\tau := \\text{Var}(\\alpha^* | y) = \\int E[(\\alpha^* - E(\\alpha^*|y))^2 | y] \\cdot p(\\alpha^* | \\mu, \\tau) \\cdot p(\\mu, \\tau | y) d\\mu d\\tau  integral implies straightforward method estimation using MCMC samples: MCMC sample m=1,…,Mm = 1, \\ldots, M hierarchical model, identify samples μ(m)\\mu^{(m)} τ(m)\\tau^{(m)} μ\\mu τ\\tau, respectively. Draw (α*)m(\\alpha^*)^{m} Normal(μ(m)\\mu^{(m)}, (τ(m))2(\\tau^{(m)})^2) distribution. Estimate VτV_\\tau variance collection (α*)1,(α*)2,…,(α*)M(\\alpha^*)^{1}, (\\alpha^*)^{2}, \\ldots, (\\alpha^*)^{M} (2). Next, define NN number non-missing control patients historical studies . Given NN, V0V_0, VτV_\\tau, define effective sample size : ESS:=NV0Vτ \\text{ESS} := N \\frac{V_0}{V_\\tau} V0Vτ\\frac{V_0}{V_\\tau} weight quantifies fraction historical information hierarchical model leverages borrowing. Notably, weight 1 hierarchical pooled model exhibit strength borrowing. Multiplied NN, quantity becomes heuristic strength borrowing hierarchical model, measured terms number historical patients.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"precision-ratio-hierarchical-model-only","dir":"Articles","previous_headings":"Borrowing metrics","what":"Precision ratio (hierarchical model only)","title":"Methods","text":"precision ratio experimental ad hoc metric used caution. implemented hb_summary() function hierarchical model. precision ratio compares prior precision control mean response (α\\alpha component, numerator) analogous precision full conditional distribution (denominator). former 1τ2\\frac{1}{\\tau^2}, latter 1τ2+nσ2\\frac{1}{\\tau^2} + \\frac{n}{\\sigma^2}. , nn number non-missing patients current study, σ2\\sigma^2 residual variance, τ2\\tau^2 variance study-specific control means (components α\\alpha). full precision ratio : 1τ21τ2+nσ2 \\begin{aligned} \\frac{\\frac{1}{\\tau^2}}{\\frac{1}{\\tau^2} + \\frac{n}{\\sigma^2}} \\end{aligned} precision ratio comes conditional distribution αk\\alpha_k hierarchical model given parameters data. precisely, conditional distribution, mean weighted average prior mean data mean, precision ratio weight prior mean. can seen simpler case Bayesian model normal data model, normal prior mean, known constant variance. details, see Chapter 2 Gelman et al. (2020).","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"variance-shift-ratio","dir":"Articles","previous_headings":"Borrowing metrics","what":"Variance shift ratio","title":"Methods","text":"variance shift ratio experimental ad hoc metric used caution. implemented legacy hb_metrics() function. Let VmV_m estimated posterior variance αI\\alpha_I (current study control group response mean) estimated model mm. variance shift ratio : Vm*−VindependentVpool−Vindependent \\begin{aligned} \\frac{V_{m*} - V_{\\text{independent}}}{V_{\\text{pool}} - V_{\\text{independent}}} \\end{aligned} m*m* historical borrowing model like mixture model hierarchical model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"mean-shift-ratio-legacy","dir":"Articles","previous_headings":"Borrowing metrics","what":"Mean shift ratio (legacy)","title":"Methods","text":"mean shift ratio recommended measure strength borrowing. Rather, informal ad hoc measure lack commensurability current historical data sources. implemented legacy hb_metrics() function. define mean shift ratio, let θm\\theta_m posterior mean control group response estimated model mm. mean shift ratio : θm*−θindependentθpool−θindependent \\begin{aligned} \\frac{\\theta_{m*} - \\theta_{\\text{independent}}}{\\theta_{\\text{pool}} - \\theta_{\\text{independent}}} \\end{aligned} m*m* historical borrowing model like mixture model hierarchical model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/articles/methods.html","id":"posterior-mixture-proportions-mixture-model-only","dir":"Articles","previous_headings":"Borrowing metrics","what":"Posterior mixture proportions (mixture model only)","title":"Methods","text":"posterior mixture proportion study ii P(π=)P(\\pi = ), obtained averaging posterior samples π\\pi.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/articles/usage.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Usage","text":"historicalborrow expects data multiple patients partitioned studies groups. simulated example. functions simulate prior predictive distribution hierarchical, mixture, independent, pooled models. user choose reference level study column indicate study current one (historical). Likewise, choose level group column indicate group control group. see historicalborrow assigns numeric indexes study group levels, use hb_data(). Viewing output may assist interpreting results later .","code":"library(historicalborrow) library(dplyr) set.seed(0) data <- hb_sim_independent(   n_continuous = 1,   n_study = 3,   n_group = 2,   alpha = rep(1, 3),   delta = 0.5,   sigma = rep(1, 3),   n_patient = 100 )$data %>%   rename(     outcome = response,     trial = study,     arm = group,     subject = patient,     factor1 = covariate_study1_continuous1,     factor2 = covariate_study2_continuous1   ) %>%   mutate(     trial = paste0(\"trial\", trial),     arm = paste0(\"arm\", arm),     subject = paste0(\"subject\", subject)   ) data #> # A tibble: 400 × 7 #>    trial  arm   subject    factor1 factor2 covariate_study3_continuous1 outcome #>    <chr>  <chr> <chr>        <dbl>   <dbl>                        <dbl>   <dbl> #>  1 trial1 arm1  subject1   1.27          0                            0  3.31   #>  2 trial1 arm1  subject2   0.415         0                            0  3.23   #>  3 trial1 arm1  subject3  -1.54          0                            0 -3.08   #>  4 trial1 arm1  subject4  -0.929         0                            0 -0.623  #>  5 trial1 arm1  subject5  -0.295         0                            0  2.33   #>  6 trial1 arm1  subject6  -0.00577       0                            0  1.12   #>  7 trial1 arm1  subject7   2.40          0                            0  5.88   #>  8 trial1 arm1  subject8   0.764         0                            0  2.69   #>  9 trial1 arm1  subject9  -0.799         0                            0 -0.0117 #> 10 trial1 arm1  subject10 -1.15          0                            0  0.261  #> # ℹ 390 more rows library(dplyr) standardized_data <- hb_data(   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   covariates = c(\"factor1\", \"factor2\") ) standardized_data #> # A tibble: 400 × 9 #>    response study_label group_label patient_label study group patient #>       <dbl> <chr>       <chr>       <chr>         <int> <int>   <int> #>  1    3.31  trial1      arm1        subject1          1     1       1 #>  2    0.261 trial1      arm1        subject10         1     1       2 #>  3    1.81  trial1      arm1        subject100        1     1       3 #>  4   -1.21  trial1      arm1        subject11         1     1      13 #>  5    0.236 trial1      arm1        subject12         1     1      24 #>  6    1.02  trial1      arm1        subject13         1     1      35 #>  7    2.72  trial1      arm1        subject14         1     1      46 #>  8    0.485 trial1      arm1        subject15         1     1      57 #>  9    1.83  trial1      arm1        subject16         1     1      68 #> 10    0.357 trial1      arm1        subject17         1     1      79 #> # ℹ 390 more rows #> # ℹ 2 more variables: covariate_factor1 <dbl>, covariate_factor2 <dbl> distinct(   standardized_data,   study,   study_label,   group,   group_label ) %>%   select(     study,     study_label,     group,     group_label   ) #> # A tibble: 4 × 4 #>   study study_label group group_label #>   <int> <chr>       <int> <chr>       #> 1     1 trial1          1 arm1        #> 2     2 trial2          1 arm1        #> 3     3 trial3          1 arm1        #> 4     3 trial3          2 arm2"},{"path":"https://wlandau.github.io/historicalborrow/articles/usage.html","id":"models","dir":"Articles","previous_headings":"","what":"Models","title":"Usage","text":"pooled independent models benchmarks used quantify borrowing strength hierarchical mixture models. run benchmark models, run functions . function returns data frame one column per parameter one row per posterior sample. hierarchical model works best number historical studies large. small number historical studies, may necessary choose value s_tau approximate prior amount borrowing given desired precision ratio supposed residual variance. See function hb_s_tau() initial value explore. recommended entirely rely hb_s_tau(), give benchmark aid thinking. mixture model, first necessary use simple model get prior mixture components. , using just data current study, run mixture model hyperparameters .","code":"mcmc_pool <- hb_mcmc_pool(   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   # Can be continuous, categorical, or binary columns:   covariates = c(\"factor1\", \"factor2\"),   # Raise these arguments for serious analyses:   n_chains = 4,   n_adapt = 2e3,   n_warmup = 2e3,   n_iterations = 4e3 )  mcmc_pool #> # A tibble: 16,000 × 10 #>    alpha `beta[1]` `beta[2]`  delta `sigma[1]` `sigma[2]` `sigma[3]` .chain #>    <dbl>     <dbl>     <dbl>  <dbl>      <dbl>      <dbl>      <dbl>  <int> #>  1 0.951      1.31  -0.174   0.313        1.07      1.02        1.66      1 #>  2 0.822      1.41  -0.0920  0.0491       1.09      0.895       1.72      1 #>  3 0.908      1.33  -0.216   0.345        1.05      0.934       1.72      1 #>  4 0.956      1.43  -0.118   0.229        1.00      0.944       1.72      1 #>  5 0.977      1.20  -0.170   0.572        1.06      0.996       1.70      1 #>  6 0.983      1.42  -0.0678  0.230        1.06      1.06        1.71      1 #>  7 1.02       1.38   0.0449  0.141        1.14      1.03        1.94      1 #>  8 0.909      1.34   0.00974 0.833        1.11      1.06        1.78      1 #>  9 0.817      1.30  -0.0706  0.275        1.40      0.967       1.78      1 #> 10 1.03       1.42  -0.288   0.162        1.33      0.927       1.75      1 #> # ℹ 15,990 more rows #> # ℹ 2 more variables: .iteration <int>, .draw <int> mcmc_independent <- hb_mcmc_independent(   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   # Can be continuous, categorical, or binary columns:   covariates = c(\"factor1\", \"factor2\"),   # Raise these arguments for serious analyses:   n_chains = 4,   n_adapt = 2e3,   n_warmup = 2e3,   n_iterations = 4e3 ) mcmc_hierarchical <- hb_mcmc_hierarchical(   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   # Can be continuous, categorical, or binary columns:   covariates = c(\"factor1\", \"factor2\"),   # Raise these arguments for serious analyses:   n_chains = 4,   n_adapt = 2e3,   n_warmup = 2e3,   n_iterations = 4e3 ) hyperparameters <- hb_mcmc_mixture_hyperparameters(   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\" ) hyperparameters #> # A tibble: 3 × 4 #>   study  study_index m_omega s_omega #>   <chr>        <int>   <dbl>   <dbl> #> 1 trial1           1   0.982  0.177  #> 2 trial2           2   0.892  0.0975 #> 3 trial3           3   0     30 data_mixture <- dplyr::filter(data, trial == \"trial3\") mcmc_mixture <- hb_mcmc_mixture(   data = data_mixture, # only analyze current study   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   # Can be continuous, categorical, or binary columns:   covariates = c(\"factor1\", \"factor2\"),   # Prior mixture components:   m_omega = hyperparameters$m_omega,   s_omega = hyperparameters$s_omega,   p_omega = rep(1 / nrow(hyperparameters), nrow(hyperparameters)),   # Raise these arguments for serious analyses:   n_chains = 4,   n_adapt = 2e3,   n_warmup = 2e3,   n_iterations = 4e3 )"},{"path":"https://wlandau.github.io/historicalborrow/articles/usage.html","id":"convergence","dir":"Articles","previous_headings":"","what":"Convergence","title":"Usage","text":"important check convergence diagnostics model. hb_convergence() function returns data frame summarized convergence diagnostics. max_rhat maximum univariate Gelman/Rubin potential scale reduction factor parameters model, min_ess_bulk minimum bulk effective sample size parameters, min_ess_tail minimum tail effective sample size. max_rhat 1.01, ESS metrics 100 times number MCMC chains. conditions true, MCMC converge, recommended try running model saved iterations (max_rhat high, possibly warmup iterations).","code":"hb_convergence(mcmc_hierarchical) #> # A tibble: 1 × 3 #>   max_rhat min_ess_bulk min_ess_tail #>      <dbl>        <dbl>        <dbl> #> 1     1.07         42.9         11.5"},{"path":"https://wlandau.github.io/historicalborrow/articles/usage.html","id":"results","dir":"Articles","previous_headings":"","what":"Results","title":"Usage","text":"model can summarized hb_summary() function. output table rows many columns. hb_summary() returns tidy data frame one row per group (e.g. treatment arm) columns following list. Unless otherwise specified, quantities calculated group level. calculated current (non-historical) study , others pertain combined dataset includes historical studies. mixture model exception data argument includes current study, quantities include historical information need borrow hb_summary() call one models. group: group label. data_mean: observed mean response specific current study. data_sd: observed standard deviation response specific current study. data_lower: lower bound simple frequentist 95% confidence interval observed mean specific current study. data_upper: upper bound simple frequentist 95% confidence interval observed mean specific current study. data_n: number non-missing observations combined dataset studies. data_N: total number observations (missing non-missing) combined dataset studies. data_n_study_*: number non-missing observations separately study. suffixes column names integer study indexes. Call dplyr::distinct(hb_data(your_data), study, study_label) see study labels correspond integer indexes. Note: combined dataset mixture model just current study. data_n_study_* results across studies desired, call hb_summary() different model (e.g. pooled). data_N_study_*: data_n_study_* except missing non-missing observations counted (total number observations). response_mean: Estimated posterior mean response model specific current study. Typically, raw response change baseline, case response_mean estimating change baseline. response_sd: Estimated posterior standard deviation mean response model specific current study. response_variance: Estimated posterior variance mean response model specific current study. response_lower: Lower bound 95% posterior interval mean response model specific current study. response_upper: Upper bound 95% posterior interval mean response model specific current study. response_mean_mcse: Monte Carlo standard error response_mean. response_sd_mcse: Monte Carlo standard error response_sd. response_lower_mcse: Monte Carlo standard error response_lower. response_upper_mcse: Monte Carlo standard error response_upper. diff_mean: Estimated treatment effect model specific current study. diff_lower: Lower bound 95% posterior interval treatment effect model specific current study. diff_upper: Upper bound 95% posterior interval treatment effect model specific current study.. diff_mean_mcse: Monte Carlo standard error diff_mean. diff_lower_mcse: Monte Carlo standard error diff_lower. diff_upper_mcse: Monte Carlo standard error diff_upper. P(diff > EOI), P(diff < EOI): CSF probabilities treatment effect specified eoi direction arguments. Specific current study. effect_mean: Estimated posterior mean effect size (treatment difference divided residual standard deviation). Specific current study. effect_lower: Lower bound 95% posterior interval effect size model. Specific current study. effect_upper: Upper bound 95% posterior interval effect size model. Specific current study. precision_ratio: hierarchical model , model-based mean precision ratio. Specific current study. precision_ratio_lower: hierarchical model , lower bound model-based 95% posterior interval precision ratio. Specific current study. precision_ratio_upper: hierarchical model , upper bound model-based 95% posterior interval precision ratio. Specific current study. mix_prop_*: mixture model , posterior mixture proportions mixture components. last one current study first ones historical studies. suffixes column names integer study indexes. Call dplyr::distinct(hb_data(your_data), study, study_label) see study labels correspond integer indexes.","code":"summary_hierarchical <- hb_summary(   mcmc = mcmc_hierarchical,   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   covariates = c(\"factor1\", \"factor2\"),   eoi = c(0, 1),   direction = c(\">\", \"<\") ) summary_hierarchical #> # A tibble: 2 × 40 #>   group group_label data_n data_N data_n_study_1 data_n_study_2 data_n_study_3 #>   <dbl> <chr>        <int>  <int>          <int>          <int>          <int> #> 1     1 arm1           300    300            100            100            100 #> 2     2 arm2           100    100              0              0            100 #> # ℹ 33 more variables: data_N_study_1 <int>, data_N_study_2 <int>, #> #   data_N_study_3 <int>, data_mean <dbl>, data_sd <dbl>, data_lower <dbl>, #> #   data_upper <dbl>, response_mean <dbl>, response_variance <dbl>, #> #   response_sd <dbl>, response_lower <dbl>, response_upper <dbl>, #> #   response_mean_mcse <dbl>, response_sd_mcse <dbl>, #> #   response_lower_mcse <dbl>, response_upper_mcse <dbl>, diff_mean <dbl>, #> #   diff_lower <dbl>, diff_upper <dbl>, diff_mean_mcse <dbl>, …"},{"path":"https://wlandau.github.io/historicalborrow/articles/usage.html","id":"borrowing-metrics","dir":"Articles","previous_headings":"","what":"Borrowing metrics","title":"Usage","text":"hb_metrics() function shows borrowing metrics like mean shift ratio variance shift ratio require input benchmark models. mean shift ratio variance shift ratio defined methods vignette. , compute metrics hierarchical model. Usage mixture model .","code":"summary_pool <- hb_summary(   mcmc = mcmc_pool,   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   covariates = c(\"factor1\", \"factor2\") )  summary_independent <- hb_summary(   mcmc = mcmc_independent,   data = data,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   covariates = c(\"factor1\", \"factor2\") )  hb_metrics(   borrow = summary_hierarchical,   pool = summary_pool,   independent = summary_independent ) #> # A tibble: 1 × 2 #>   mean_shift_ratio variance_shift_ratio #>              <dbl>                <dbl> #> 1            0.477                0.418 summary_mixture <- hb_summary(   mcmc = mcmc_mixture,   data = data_mixture,   response = \"outcome\",   study = \"trial\",   study_reference = \"trial3\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   covariates = c(\"factor1\", \"factor2\") )  hb_metrics(   borrow = summary_mixture,   pool = summary_pool,   independent = summary_independent ) #> # A tibble: 1 × 2 #>   mean_shift_ratio variance_shift_ratio #>              <dbl>                <dbl> #> 1            0.726                0.631"},{"path":"https://wlandau.github.io/historicalborrow/articles/usage.html","id":"plots","dir":"Articles","previous_headings":"","what":"Plots","title":"Usage","text":"hb_plot_borrow() function visualizes results borrowing model (either hierarchical mixture) benchmark models (independent pooled) gain intuition overall effect borrowing estimation.   hb_plot_group() shows information grouped group designations data (e.g. treatment arm).  hierarchical model, can plot marginal posterior tau parameter. compared prior practice understand influence prior data posterior.","code":"hb_plot_borrow(   borrow = summary_hierarchical,   pool = summary_pool,   independent = summary_independent ) hb_plot_borrow(   borrow = summary_mixture,   pool = summary_pool,   independent = summary_independent ) hb_plot_group(   borrow = summary_mixture,   pool = summary_pool,   independent = summary_independent ) hb_plot_tau(mcmc_hierarchical)"},{"path":"https://wlandau.github.io/historicalborrow/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"William Michael Landau. Author, maintainer. Albert Man. Reviewer. Eli Lilly Company. Copyright holder.","code":""},{"path":"https://wlandau.github.io/historicalborrow/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Landau WM (2024). historicalborrow: Non-Longitudinal Bayesian Historical Borrowing Models. R package version 1.1.0, https://github.com/wlandau/historicalborrow, https://wlandau.github.io/historicalborrow/.","code":"@Manual{,   title = {historicalborrow: Non-Longitudinal Bayesian Historical Borrowing Models},   author = {William Michael Landau},   year = {2024},   note = {R package version 1.1.0,   https://github.com/wlandau/historicalborrow},   url = {https://wlandau.github.io/historicalborrow/}, }"},{"path":"https://wlandau.github.io/historicalborrow/index.html","id":"historicalborrow","dir":"","previous_headings":"","what":"Non-Longitudinal Bayesian Historical Borrowing Models","title":"Non-Longitudinal Bayesian Historical Borrowing Models","text":"Historical borrowing clinical trials can improve precision operating characteristics. package supports hierarchical model mixture model borrow historical control data studies better characterize response control arm current study. also quantifies amount borrowing benchmark models (independent pooled). methods discussed Viele et al. (2013).","code":""},{"path":"https://wlandau.github.io/historicalborrow/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Non-Longitudinal Bayesian Historical Borrowing Models","text":"","code":"remotes::install_github(\"wlandau/historicalborrow\")"},{"path":"https://wlandau.github.io/historicalborrow/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Non-Longitudinal Bayesian Historical Borrowing Models","text":"Functions: https://wlandau.github.io/historicalborrow/reference/ Methods: https://wlandau.github.io/historicalborrow/articles/methods.html Usage: https://wlandau.github.io/historicalborrow/articles/usage.html","code":""},{"path":"https://wlandau.github.io/historicalborrow/index.html","id":"thanks","dir":"","previous_headings":"","what":"Thanks","title":"Non-Longitudinal Bayesian Historical Borrowing Models","text":"Albert Man reviewed package. Albert, Faith Bian, Saptarshi Chatterjee contributed development methods prior implementation. Phebe Kemmer, Heather Zhao, Zhangchen Zhao also provided helpful feedback models application clinical use-cases.","code":""},{"path":"https://wlandau.github.io/historicalborrow/index.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Non-Longitudinal Bayesian Historical Borrowing Models","text":"Please note historicalborrow project released Contributor Code Conduct. contributing project, agree abide terms.","code":""},{"path":"https://wlandau.github.io/historicalborrow/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Non-Longitudinal Bayesian Historical Borrowing Models","text":"Viele, Kert Berry, Scott Neuenschwander, Beat et al. “Use historical control data assessing treatment effects clinical trials.” Pharmaceutical Statistics 1(13), 2013.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_convergence.html","id":null,"dir":"Reference","previous_headings":"","what":"Check convergence diagnostics — hb_convergence","title":"Check convergence diagnostics — hb_convergence","text":"Check convergence diagnostics model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_convergence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check convergence diagnostics — hb_convergence","text":"","code":"hb_convergence(mcmc)"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_convergence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check convergence diagnostics — hb_convergence","text":"mcmc wide data frame posterior samples returned hb_mcmc_hierarchical() similar MCMC function.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_convergence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check convergence diagnostics — hb_convergence","text":"data frame summarized convergence diagnostics. max_rhat maximum univariate Gelman/Rubin potential scale reduction factor parameters model, min_ess_bulk minimum bulk effective sample size parameters, min_ess_tail minimum tail effective sample size. max_rhat 1.01, ESS metrics 100 times number MCMC chains. conditions true, MCMC converge, recommended try running model saved iterations (max_rhat high, possibly warmup iterations).","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_convergence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check convergence diagnostics — hb_convergence","text":"","code":"data <- hb_sim_pool(n_continuous = 2)$data mcmc <- hb_mcmc_pool(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 200,   n_iterations = 200 ) hb_convergence(mcmc) #> # A tibble: 1 × 3 #>   max_rhat min_ess_bulk min_ess_tail #>      <dbl>        <dbl>        <dbl> #> 1     1.02         104.         109."},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize data — hb_data","title":"Standardize data — hb_data","text":"Standardize tidy input dataset.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize data — hb_data","text":"","code":"hb_data(   data,   response,   study,   study_reference,   group,   group_reference,   patient,   covariates )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize data — hb_data","text":"data tidy data frame tibble data. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID. covariates Character vector column names data columns baseline covariates. can continuous, categorical, binary. Regardless, historicalborrow derives appropriate model matrix.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize data — hb_data","text":"standardized tidy data frame one row per patient following columns: response: continuous response/outcome variable. (change baseline outcome interest.) study_label: human-readable label study. study: integer study index max index equal current study (study_reference). group_label: human-readable group label (e.g. treatment arm name). group: integer group index index 1 equal control group (group_reference). patient_label: original patient ID. patient: integer patient index. covariate_*: baseline covariate columns.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Standardize data — hb_data","text":"Users normally need call function. mainly serves exposes indexing behavior studies group levels aid interpreting summary tables.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Standardize data — hb_data","text":"","code":"data <- hb_sim_independent(n_continuous = 1, n_study = 2)$data data <- dplyr::select(   data,   study,   group,   patient,   response,   tidyselect::everything() ) colnames(data) <- c(\"trial\", \"arm\", \"subject\", \"change\", \"cov1\", \"cov2\") data$trial <- paste0(\"trial\", data$trial) data$arm <- paste0(\"arm\", data$arm) hb_data(   data = data,   response = \"change\",   study = \"trial\",   study_reference = \"trial1\",   group = \"arm\",   group_reference = \"arm1\",   patient = \"subject\",   covariates = c(\"cov1\", \"cov2\") ) #> # A tibble: 400 × 9 #>    response study_label group_label patient_label study group patient #>       <dbl> <chr>       <chr>               <int> <int> <int>   <int> #>  1    1.91  trial2      arm1                  101     1     1     101 #>  2    3.27  trial2      arm1                  102     1     1     102 #>  3    3.04  trial2      arm1                  103     1     1     103 #>  4    2.01  trial2      arm1                  104     1     1     104 #>  5    1.61  trial2      arm1                  105     1     1     105 #>  6    0.912 trial2      arm1                  106     1     1     106 #>  7    0.885 trial2      arm1                  107     1     1     107 #>  8    1.33  trial2      arm1                  108     1     1     108 #>  9    1.04  trial2      arm1                  109     1     1     109 #> 10   -1.81  trial2      arm1                  110     1     1     110 #> # ℹ 390 more rows #> # ℹ 2 more variables: covariate_cov1 <dbl>, covariate_cov2 <dbl>"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_ess.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior effective sample size (ESS) — hb_ess","title":"Prior effective sample size (ESS) — hb_ess","text":"Quantify borrowing prior effective sample size (ESS) cited explained methods vignette https://wlandau.github.io/historicalborrow/articles/methods.html.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_ess.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior effective sample size (ESS) — hb_ess","text":"","code":"hb_ess(   mcmc_pool,   mcmc_hierarchical,   data,   response = \"response\",   study = \"study\",   study_reference = max(data[[study]]),   group = \"group\",   group_reference = min(data[[group]]),   patient = \"patient\" )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_ess.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior effective sample size (ESS) — hb_ess","text":"mcmc_pool fitted model hb_mcmc_pool(). mcmc_hierarchical fitted model hb_mcmc_hierarchical(). data tidy data frame tibble data. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_ess.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior effective sample size (ESS) — hb_ess","text":"data frame one row following columns: v0: posterior predictive variance control group mean hypothetical new study given pooled model. Calculated mean MCMC samples 1 / sum(sigma_i ^ 2), sigma_i residual standard deviation study estimated pooled model. v_tau: posterior predictive variance hypothetical new control group mean hierarchical model. Calculated averaging predictive draws, predictive draw rnorm(n = 1, mean = mu_, sd = tau_) mu_ tau_ mu tau components MCMC sample. n: number non-missing historical control patients. weight: strength borrowing ratio variances: v0 / v_tau. ess: strength borrowing prior effective sample size: n v0 / v_tau, n number non-missing control patients.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_ess.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior effective sample size (ESS) — hb_ess","text":"","code":"data <- hb_sim_independent(n_continuous = 2)$data   data$group <- sprintf(\"group%s\", data$group)   data$study <- sprintf(\"study%s\", data$study)   pool <- hb_mcmc_pool(     data,     n_chains = 1,     n_adapt = 100,     n_warmup = 50,     n_iterations = 50   )   hierarchical <- hb_mcmc_hierarchical(     data,     n_chains = 1,     n_adapt = 100,     n_warmup = 50,     n_iterations = 50   )   hb_ess(     mcmc_pool = pool,     mcmc_hierarchical = hierarchical,     data = data   ) #> # A tibble: 1 × 5 #>     ess weight     n    v0 v_tau #>   <dbl>  <dbl> <int> <dbl> <dbl> #> 1  8.24 0.0206   400 0.226  11.0"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_hierarchical.html","id":null,"dir":"Reference","previous_headings":"","what":"Hierarchical model MCMC — hb_mcmc_hierarchical","title":"Hierarchical model MCMC — hb_mcmc_hierarchical","text":"Run hierarchical model MCMC.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_hierarchical.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hierarchical model MCMC — hb_mcmc_hierarchical","text":"","code":"hb_mcmc_hierarchical(   data,   response = \"response\",   study = \"study\",   study_reference = max(data[[study]]),   group = \"group\",   group_reference = min(data[[group]]),   patient = \"patient\",   covariates = grep(\"^covariate\", colnames(data), value = TRUE),   s_delta = 30,   s_beta = 30,   s_sigma = 30,   s_mu = 30,   s_tau = sd(data[[response]], na.rm = TRUE),   d_tau = 1,   prior_tau = \"half_t\",   n_chains = 4,   n_adapt = 2000,   n_warmup = 4000,   n_iterations = 20000,   quiet = TRUE )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_hierarchical.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Hierarchical model MCMC — hb_mcmc_hierarchical","text":"data Tidy data frame one row per patient, indicator columns response variable, study, group, patient, covariates. columns must atomic vectors (e.g. lists). data mixture simple models just one study, others data one study. simple model can used get historical data components m_omega s_omega mixture model. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID. covariates Character vector column names data columns baseline covariates. can continuous, categorical, binary. Regardless, historicalborrow derives appropriate model matrix. s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. s_mu Numeric length 1, prior standard deviation mu. s_tau Non-negative numeric length 1. prior_tau \"half_t\", s_tau scale parameter Student t prior tau analogous sigma parameter Student-t parameterization given https://mc-stan.org/docs/functions-reference/unbounded_continuous_distributions.html. # nolint prior_tau \"uniform\", s_tau upper bound tau. Upper bound tau prior_tau \"uniform\". case prior_tau equal \"half_t\", defaults s_tau = sd(data[[response]], na.rm = TRUE) d_tau = 1  specify weakly informative scaled half-Cauchy distribution. choice provisional. prior tau extremely important, especially small numbers historical studies, user set reasonable value use case, ideally informed results sensitivity analyses simulations. d_tau Positive numeric length 1. Degrees freedom Student t prior tau prior_tau \"half_t\". case prior_tau equal \"half_t\", defaults s_tau = sd(data[[response]], na.rm = TRUE) d_tau = 1  specify weakly informative scaled half-Cauchy distribution. choice provisional. prior tau extremely important, especially small numbers historical studies, user set reasonable value use case, ideally informed results sensitivity analyses simulations. prior_tau Character string, name prior tau. prior_tau equals \"uniform\", prior tau uniform prior lower bound 0 upper bound s_tau. prior_tau equals \"half_t\", prior tau half Student-t prior center 0, lower bound 0, scale parameter s_tau, degrees freedom d_tau. scale parameter s_tau analogous sigma parameter Student-t parameterization given https://mc-stan.org/docs/functions-reference/unbounded_continuous_distributions.html. # nolint n_chains Number MCMC chains run. n_adapt Number adaptation iterations run. n_warmup Number warmup iterations per chain run. n_iterations Number saved MCMC iterations per chain run. quiet Logical length 1, TRUE suppress R console output.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_hierarchical.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Hierarchical model MCMC — hb_mcmc_hierarchical","text":"tidy data frame parameter samples posterior distribution. Columns .chain, .iteration, .draw meanings documented posterior package.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_hierarchical.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Hierarchical model MCMC — hb_mcmc_hierarchical","text":"","code":"if (!identical(Sys.getenv(\"HB_TEST\", unset = \"\"), \"\")) { data <- hb_sim_hierarchical(n_continuous = 2)$data hb_mcmc_hierarchical(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) }"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_independent.html","id":null,"dir":"Reference","previous_headings":"","what":"Independent-study model MCMC — hb_mcmc_independent","title":"Independent-study model MCMC — hb_mcmc_independent","text":"Run independent-study model MCMC.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_independent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Independent-study model MCMC — hb_mcmc_independent","text":"","code":"hb_mcmc_independent(   data,   response = \"response\",   study = \"study\",   study_reference = max(data[[study]]),   group = \"group\",   group_reference = min(data[[group]]),   patient = \"patient\",   covariates = grep(\"^covariate\", colnames(data), value = TRUE),   s_alpha = 30,   s_delta = 30,   s_beta = 30,   s_sigma = 30,   n_chains = 4,   n_adapt = 2000,   n_warmup = 4000,   n_iterations = 20000,   quiet = TRUE )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_independent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Independent-study model MCMC — hb_mcmc_independent","text":"data Tidy data frame one row per patient, indicator columns response variable, study, group, patient, covariates. columns must atomic vectors (e.g. lists). data mixture simple models just one study, others data one study. simple model can used get historical data components m_omega s_omega mixture model. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID. covariates Character vector column names data columns baseline covariates. can continuous, categorical, binary. Regardless, historicalborrow derives appropriate model matrix. s_alpha Numeric length 1, prior standard deviation study-specific control group mean parameters alpha. s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. n_chains Number MCMC chains run. n_adapt Number adaptation iterations run. n_warmup Number warmup iterations per chain run. n_iterations Number saved MCMC iterations per chain run. quiet Logical length 1, TRUE suppress R console output.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_independent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Independent-study model MCMC — hb_mcmc_independent","text":"tidy data frame parameter samples posterior distribution. Columns .chain, .iteration, .draw meanings documented posterior package.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_independent.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Independent-study model MCMC — hb_mcmc_independent","text":"","code":"if (!identical(Sys.getenv(\"HB_TEST\", unset = \"\"), \"\")) { data <- hb_sim_independent(n_continuous = 2)$data hb_mcmc_independent(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) }"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture.html","id":null,"dir":"Reference","previous_headings":"","what":"Mixture model MCMC — hb_mcmc_mixture","title":"Mixture model MCMC — hb_mcmc_mixture","text":"Run mixture model MCMC.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mixture model MCMC — hb_mcmc_mixture","text":"","code":"hb_mcmc_mixture(   data,   response = \"response\",   study = \"study\",   study_reference = max(data[[study]]),   group = \"group\",   group_reference = min(data[[group]]),   patient = \"patient\",   covariates = grep(\"^covariate\", colnames(data), value = TRUE),   s_delta = 30,   s_beta = 30,   s_sigma = 30,   m_omega = c(0, 0),   s_omega = c(30, 30),   p_omega = 1/length(m_omega),   n_chains = 4,   n_adapt = 2000,   n_warmup = 4000,   n_iterations = 20000,   quiet = TRUE )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mixture model MCMC — hb_mcmc_mixture","text":"data Tidy data frame one row per patient, indicator columns response variable, study, group, patient, covariates. columns must atomic vectors (e.g. lists). data mixture simple models just one study, others data one study. simple model can used get historical data components m_omega s_omega mixture model. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID. covariates Character vector column names data columns baseline covariates. can continuous, categorical, binary. Regardless, historicalborrow derives appropriate model matrix. s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. m_omega Numeric length equal number supposed studies (current study data). m_omega prior control group mean study. last element corresponds current study, others historical studies. s_omega Numeric length equal number supposed studies (current study data). s_omega prior control group standard deviation study. last element corresponds current study, others historical studies. p_omega Numeric length equal number supposed studies (current study data). p_omega prior control group mixture proportion study. last element corresponds current study, others historical studies. n_chains Number MCMC chains run. n_adapt Number adaptation iterations run. n_warmup Number warmup iterations per chain run. n_iterations Number saved MCMC iterations per chain run. quiet Logical length 1, TRUE suppress R console output.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mixture model MCMC — hb_mcmc_mixture","text":"tidy data frame parameter samples posterior distribution. Columns .chain, .iteration, .draw meanings documented posterior package.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Mixture model MCMC — hb_mcmc_mixture","text":"study-specific components mixture prior fixed advance. Mixture components normal distributions means m_omega standard deviations s_omega. vectors ordered historical studies first current study last. mixture components can computed using hb_mcmc_mixture_hyperparameters() full set data (historical studies current study together). m_omega s_omega columns output can plugged directly hb_mcmc_mixture(). See examples demonstration.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mixture model MCMC — hb_mcmc_mixture","text":"","code":"data_all_studies <- hb_sim_independent(n_continuous = 2)$data data_all_studies$study <- paste0(\"study\", data_all_studies$study) hyperparameters <- hb_mcmc_mixture_hyperparameters(   data = data_all_studies,   response = \"response\",   study = \"study\",   study_reference = \"study5\",   group = \"group\",   group_reference = 1,   patient = \"patient\",   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) print(hyperparameters) #> # A tibble: 5 × 4 #>   study  study_index m_omega s_omega #>   <chr>        <int>   <dbl>   <dbl> #> 1 study1           1   0.100  0.285  #> 2 study2           2  -0.453  0.0933 #> 3 study3           3   0.797  0.0709 #> 4 study4           4  -0.313  0.202  #> 5 study5           5   0     30      data_current_study <- dplyr::filter(data_all_studies, study == max(study)) hb_mcmc_mixture(   data = data_current_study,   response = \"response\",   study = \"study\",   study_reference = \"study5\",   group = \"group\",   group_reference = 1,   patient = \"patient\",   m_omega = hyperparameters$m_omega, # use hyperparams from historical data   s_omega = hyperparameters$s_omega, # use hyperparams from historical data   p_omega = rep(1 / nrow(hyperparameters), nrow(hyperparameters)),   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) #> # A tibble: 50 × 19 #>      alpha `beta[1]` `beta[2]` `delta[1]` `delta[2]` `omega[1]` `omega[2]` #>      <dbl>     <dbl>     <dbl>      <dbl>      <dbl>      <dbl>      <dbl> #>  1  0.0364     0.592     -1.39     -0.266     -0.228     0.0364     -0.458 #>  2  0.0368     0.619     -1.38     -0.231     -0.202     0.0368     -0.370 #>  3  0.0195     0.691     -1.36     -0.335     -0.257     0.0195     -0.324 #>  4  0.108      0.660     -1.37     -0.348     -0.258     0.108      -0.352 #>  5  0.0420     0.681     -1.39     -0.318     -0.282     0.0420     -0.512 #>  6 -0.0370     0.617     -1.42     -0.262     -0.152    -0.0370     -0.428 #>  7  0.0360     0.618     -1.34     -0.315     -0.232     0.0360     -0.487 #>  8 -0.0284     0.592     -1.40     -0.353     -0.256    -0.0284     -0.568 #>  9  0.0841     0.605     -1.33     -0.309     -0.190     0.0841     -0.370 #> 10  0.179      0.644     -1.36     -0.328     -0.200     0.179      -0.652 #> # ℹ 40 more rows #> # ℹ 12 more variables: `omega[3]` <dbl>, `omega[4]` <dbl>, `omega[5]` <dbl>, #> #   `post_p[1]` <dbl>, `post_p[2]` <dbl>, `post_p[3]` <dbl>, `post_p[4]` <dbl>, #> #   `post_p[5]` <dbl>, sigma <dbl>, .chain <int>, .iteration <int>, .draw <int>"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture_hyperparameters.html","id":null,"dir":"Reference","previous_headings":"","what":"Mixture model MCMC hyperparameters — hb_mcmc_mixture_hyperparameters","title":"Mixture model MCMC hyperparameters — hb_mcmc_mixture_hyperparameters","text":"Run simple model separately historical study control group compute hyperparameters hb_mcmc_mixture().","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture_hyperparameters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mixture model MCMC hyperparameters — hb_mcmc_mixture_hyperparameters","text":"","code":"hb_mcmc_mixture_hyperparameters(   data,   response = \"response\",   study = \"study\",   study_reference = max(data[[study]]),   group = \"group\",   group_reference = min(data[[group]]),   patient = \"patient\",   m_mu = 0,   s_mu = 30,   s_sigma = 30,   m_omega_current = 0,   s_omega_current = 30,   n_chains = 4,   n_adapt = 2000,   n_warmup = 4000,   n_iterations = 20000,   quiet = TRUE )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture_hyperparameters.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mixture model MCMC hyperparameters — hb_mcmc_mixture_hyperparameters","text":"data Tidy data frame one row per patient, indicator columns response variable, study, group, patient, covariates. columns must atomic vectors (e.g. lists). data mixture simple models just one study, others data one study. simple model can used get historical data components m_omega s_omega mixture model. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID. m_mu Numeric length 1, prior mean mean mu simple model. s_mu Numeric length 1, prior standard deviation mean mu simple model. s_sigma Numeric length 1, uniform prior upper bound residual standard deviation sigma simple model. m_omega_current Numeric length 1, m_omega value current study. Inserted final component m_omega column output. s_omega_current Numeric length 1, s_omega value current study. Inserted final component s_omega column output. n_chains Number MCMC chains run. n_adapt Number adaptation iterations run. n_warmup Number warmup iterations per chain run. n_iterations Number saved MCMC iterations per chain run. quiet Logical length 1, TRUE suppress R console output.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture_hyperparameters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mixture model MCMC hyperparameters — hb_mcmc_mixture_hyperparameters","text":"tidy data frame hyperparameter values hb_mcmc_mixture(). first several rows historical studies, last row current study. Studies/rows sorted order hb_mcmc_mixture() sorts , can use columns m_omega s_omega dataset values arguments directly hb_mcmc_mixture().","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture_hyperparameters.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Mixture model MCMC hyperparameters — hb_mcmc_mixture_hyperparameters","text":"model simple Bayesian model normal likelihood, unknown mean mu, unknown standard deviation sigma. historical study, posterior mean mu becomes corresponding component m_omega output, posterior standard deviation mu becomes corresponding component s_omega output. See examples help file demonstration. m_omega s_omega define components mixture prior hb_mcmc_mixture() act contribution historical studies model.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_mixture_hyperparameters.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mixture model MCMC hyperparameters — hb_mcmc_mixture_hyperparameters","text":"","code":"data_all_studies <- hb_sim_independent(n_continuous = 2)$data data_all_studies$study <- paste0(\"study\", data_all_studies$study) hyperparameters <- hb_mcmc_mixture_hyperparameters(   data = data_all_studies,   response = \"response\",   study = \"study\",   study_reference = \"study5\",   group = \"group\",   group_reference = 1,   patient = \"patient\",   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) print(hyperparameters) #> # A tibble: 5 × 4 #>   study  study_index m_omega s_omega #>   <chr>        <int>   <dbl>   <dbl> #> 1 study1           1  -0.395  0.114  #> 2 study2           2   1.26   0.181  #> 3 study3           3   0.692  0.180  #> 4 study4           4   0.875  0.0958 #> 5 study5           5   0     30      data_current_study <- dplyr::filter(data_all_studies, study == max(study)) hb_mcmc_mixture(   data = data_current_study,   response = \"response\",   study = \"study\",   study_reference = \"study5\",   group = \"group\",   group_reference = 1,   patient = \"patient\",   m_omega = hyperparameters$m_omega, # use hyperparams from historical data   s_omega = hyperparameters$s_omega, # use hyperparams from historical data   p_omega = rep(1 / nrow(hyperparameters), nrow(hyperparameters)),   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) #> # A tibble: 50 × 19 #>    alpha `beta[1]` `beta[2]` `delta[1]` `delta[2]` `omega[1]` `omega[2]` #>    <dbl>     <dbl>     <dbl>      <dbl>      <dbl>      <dbl>      <dbl> #>  1 -1.09    0.0248     0.837      0.274   0.0111        -1.09       1.06 #>  2 -1.08    0.0336     0.830      0.282   0.0145        -1.08       1.12 #>  3 -1.06    0.0179     0.836      0.288   0.0257        -1.06       1.31 #>  4 -1.07    0.0319     0.828      0.288   0.0165        -1.07       1.37 #>  5 -1.06    0.0228     0.831      0.257   0.0155        -1.06       1.30 #>  6 -1.08    0.0339     0.824      0.268   0.00188       -1.08       1.31 #>  7 -1.06    0.0345     0.834      0.283  -0.000123      -1.06       1.17 #>  8 -1.06    0.0344     0.832      0.291   0.00559       -1.06       1.55 #>  9 -1.10    0.0379     0.837      0.284   0.0101        -1.10       1.13 #> 10 -1.07    0.0271     0.837      0.271   0.00946       -1.07       1.27 #> # ℹ 40 more rows #> # ℹ 12 more variables: `omega[3]` <dbl>, `omega[4]` <dbl>, `omega[5]` <dbl>, #> #   `post_p[1]` <dbl>, `post_p[2]` <dbl>, `post_p[3]` <dbl>, `post_p[4]` <dbl>, #> #   `post_p[5]` <dbl>, sigma <dbl>, .chain <int>, .iteration <int>, .draw <int>"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_pool.html","id":null,"dir":"Reference","previous_headings":"","what":"Non-longitudinal pooled MCMC — hb_mcmc_pool","title":"Non-longitudinal pooled MCMC — hb_mcmc_pool","text":"Run non-longitudinal pooled model MCMC.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_pool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Non-longitudinal pooled MCMC — hb_mcmc_pool","text":"","code":"hb_mcmc_pool(   data,   response = \"response\",   study = \"study\",   study_reference = max(data[[study]]),   group = \"group\",   group_reference = min(data[[group]]),   patient = \"patient\",   covariates = grep(\"^covariate\", colnames(data), value = TRUE),   s_alpha = 30,   s_delta = 30,   s_beta = 30,   s_sigma = 30,   n_chains = 4,   n_adapt = 2000,   n_warmup = 4000,   n_iterations = 20000,   quiet = TRUE )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_pool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Non-longitudinal pooled MCMC — hb_mcmc_pool","text":"data Tidy data frame one row per patient, indicator columns response variable, study, group, patient, covariates. columns must atomic vectors (e.g. lists). data mixture simple models just one study, others data one study. simple model can used get historical data components m_omega s_omega mixture model. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID. covariates Character vector column names data columns baseline covariates. can continuous, categorical, binary. Regardless, historicalborrow derives appropriate model matrix. s_alpha Numeric length 1, prior standard deviation study-specific control group mean parameters alpha. s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. n_chains Number MCMC chains run. n_adapt Number adaptation iterations run. n_warmup Number warmup iterations per chain run. n_iterations Number saved MCMC iterations per chain run. quiet Logical length 1, TRUE suppress R console output.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_pool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Non-longitudinal pooled MCMC — hb_mcmc_pool","text":"tidy data frame parameter samples posterior distribution. Columns .chain, .iteration, .draw meanings documented posterior package.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_mcmc_pool.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Non-longitudinal pooled MCMC — hb_mcmc_pool","text":"","code":"if (!identical(Sys.getenv(\"HB_TEST\", unset = \"\"), \"\")) { data <- hb_sim_pool(n_continuous = 2)$data hb_mcmc_pool(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) }"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Legacy function to calculate borrowing metrics — hb_metrics","title":"Legacy function to calculate borrowing metrics — hb_metrics","text":"Legacy function calculate historical borrowing metrics using summary output fitted borrowing model analogous summaries benchmark models. Please use hb_ess() instead hb_metrics().","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Legacy function to calculate borrowing metrics — hb_metrics","text":"","code":"hb_metrics(borrow, pool, independent)"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Legacy function to calculate borrowing metrics — hb_metrics","text":"borrow data frame returned hb_summary() mixture hierarchical model. pool data frame returned hb_summary() pooled model. independent data frame returned hb_summary() independent model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Legacy function to calculate borrowing metrics — hb_metrics","text":"data frame borrowing metrics.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_metrics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Legacy function to calculate borrowing metrics — hb_metrics","text":"","code":"if (!identical(Sys.getenv(\"HB_TEST\", unset = \"\"), \"\")) { data <- hb_sim_independent(n_continuous = 2)$data mcmc_borrow <- hb_mcmc_hierarchical(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 100,   n_iterations = 200 ) mcmc_pool <- hb_mcmc_pool(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) mcmc_independent <- hb_mcmc_independent(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) borrow <- hb_summary(mcmc_borrow, data) pool <- hb_summary(mcmc_pool, data) independent <- hb_summary(mcmc_independent, data) hb_metrics(   borrow = borrow,   pool = pool,   independent = independent ) }"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_borrow.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a borrowing model response against the benchmark models. — hb_plot_borrow","title":"Plot a borrowing model response against the benchmark models. — hb_plot_borrow","text":"Plot response borrowing model (hierarchical mixture) independent pooled benchmark models.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_borrow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a borrowing model response against the benchmark models. — hb_plot_borrow","text":"","code":"hb_plot_borrow(borrow, pool, independent, outcome = c(\"response\", \"diff\"))"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_borrow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a borrowing model response against the benchmark models. — hb_plot_borrow","text":"borrow data frame returned hb_summary() mixture hierarchical model. pool data frame returned hb_summary() pooled model. independent data frame returned hb_summary() independent model. outcome Character length 1, either \"response\" \"diff\", quantity plot vertical axis.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_borrow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a borrowing model response against the benchmark models. — hb_plot_borrow","text":"ggplot object","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_borrow.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a borrowing model response against the benchmark models. — hb_plot_borrow","text":"","code":"if (!identical(Sys.getenv(\"HB_TEST\", unset = \"\"), \"\")) { data <- hb_sim_independent(n_continuous = 2)$data mcmc_borrow <- hb_mcmc_hierarchical(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 100,   n_iterations = 200 ) mcmc_pool <- hb_mcmc_pool(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 200,   n_iterations = 200 ) mcmc_independent <- hb_mcmc_independent(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 200,   n_iterations = 200 ) borrow <- hb_summary(mcmc_borrow, data) pool <- hb_summary(mcmc_pool, data) independent <- hb_summary(mcmc_independent, data) hb_plot_borrow(   borrow = borrow,   pool = pool,   independent = independent ) }"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the groups of a borrowing model and its benchmark models. — hb_plot_group","title":"Plot the groups of a borrowing model and its benchmark models. — hb_plot_group","text":"Plot groups one another borrowing model (hierarchical mixture) independent pooled benchmark models.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the groups of a borrowing model and its benchmark models. — hb_plot_group","text":"","code":"hb_plot_group(borrow, pool, independent, outcome = c(\"response\", \"diff\"))"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the groups of a borrowing model and its benchmark models. — hb_plot_group","text":"borrow data frame returned hb_summary() mixture hierarchical model. pool data frame returned hb_summary() pooled model. independent data frame returned hb_summary() independent model. outcome Character length 1, either \"response\" \"diff\", quantity plot vertical axis.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the groups of a borrowing model and its benchmark models. — hb_plot_group","text":"ggplot object","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_group.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot the groups of a borrowing model and its benchmark models. — hb_plot_group","text":"","code":"if (!identical(Sys.getenv(\"HB_TEST\", unset = \"\"), \"\")) { data <- hb_sim_independent(n_continuous = 2)$data mcmc_borrow <- hb_mcmc_hierarchical(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 100,   n_iterations = 200 ) mcmc_pool <- hb_mcmc_pool(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 200,   n_iterations = 200 ) mcmc_independent <- hb_mcmc_independent(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 200,   n_iterations = 200 ) borrow <- hb_summary(mcmc_borrow, data) pool <- hb_summary(mcmc_pool, data) independent <- hb_summary(mcmc_independent, data) hb_plot_group(   borrow = borrow,   pool = pool,   independent = independent ) }"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_tau.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot tau — hb_plot_tau","title":"Plot tau — hb_plot_tau","text":"Plot tau parameter fitted hierarchical model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_tau.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot tau — hb_plot_tau","text":"","code":"hb_plot_tau(mcmc)"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_tau.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot tau — hb_plot_tau","text":"mcmc Data frame posterior samples generated hb_mcmc_hierarchical().","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_tau.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot tau — hb_plot_tau","text":"ggplot object","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_plot_tau.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot tau — hb_plot_tau","text":"","code":"data <- hb_sim_independent(n_continuous = 2)$data mcmc <- hb_mcmc_hierarchical(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 100,   n_iterations = 200 ) hb_plot_tau(mcmc = mcmc) #> Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0. #> ℹ Please use `after_stat(density)` instead. #> ℹ The deprecated feature was likely used in the historicalborrow package. #>   Please report the issue at #>   <https://github.com/wlandau/historicalborrow/issues>."},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_s_tau.html","id":null,"dir":"Reference","previous_headings":"","what":"Superseded suggest s_tau given a uniform prior on tau. — hb_s_tau","title":"Superseded suggest s_tau given a uniform prior on tau. — hb_s_tau","text":"uniform prior tau, suggest value s_tau hyperparameter achieve given amount borrowing hierarchical model. use diffuse prior tau feasible.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_s_tau.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Superseded suggest s_tau given a uniform prior on tau. — hb_s_tau","text":"","code":"hb_s_tau(precision_ratio = 0.5, sigma = 1, n = 100)"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_s_tau.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Superseded suggest s_tau given a uniform prior on tau. — hb_s_tau","text":"precision_ratio Positive numeric vector elements 0 1 target precision ratios. sigma Positive numeric vector residual standard deviations. n Number non-missing patients.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_s_tau.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Superseded suggest s_tau given a uniform prior on tau. — hb_s_tau","text":"Numeric length equal length(precision_ratio) length(sigma), suggested values s_tau element precision_ratio sigma.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_s_tau.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Superseded suggest s_tau given a uniform prior on tau. — hb_s_tau","text":"See hierarchical model section methods vignette details.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_s_tau.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Superseded suggest s_tau given a uniform prior on tau. — hb_s_tau","text":"","code":"hb_s_tau(precision_ratio = 0.5, sigma = 1, n = 100) #> [1] 0.2"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_hierarchical.html","id":null,"dir":"Reference","previous_headings":"","what":"Non-longitudinal hierarchical simulations. — hb_sim_hierarchical","title":"Non-longitudinal hierarchical simulations. — hb_sim_hierarchical","text":"Simulate non-longitudinal hierarchical model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_hierarchical.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Non-longitudinal hierarchical simulations. — hb_sim_hierarchical","text":"","code":"hb_sim_hierarchical(   n_study = 5,   n_group = 3,   n_patient = 100,   n_continuous = 0,   n_binary = 0,   s_delta = 1,   s_beta = 1,   s_sigma = 1,   s_mu = 1,   s_tau = 1,   d_tau = 4,   prior_tau = \"half_t\",   alpha = NULL,   delta = stats::rnorm(n = n_group - 1, mean = 0, sd = s_delta),   beta = stats::rnorm(n = n_study * (n_continuous + n_binary), mean = 0, sd = s_delta),   sigma = stats::runif(n = n_study, min = 0, max = s_sigma),   mu = stats::rnorm(n = 1, mean = 0, sd = s_mu),   tau = NULL )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_hierarchical.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Non-longitudinal hierarchical simulations. — hb_sim_hierarchical","text":"n_study Number studies simulate. n_group Number groups (e.g. study arms) simulate per study. n_patient Number patients simulate per study per group. n_continuous Number continuous covariates simulate (independent standard normal distributions). n_binary Number binary covariates simulate (independent Bernoulli distributions p = 0.5). s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. s_mu Numeric length 1, prior standard deviation mu. s_tau Non-negative numeric length 1. prior_tau \"half_t\", s_tau scale parameter Student t prior tau analogous sigma parameter Student-t parameterization given https://mc-stan.org/docs/functions-reference/unbounded_continuous_distributions.html. # nolint prior_tau \"uniform\", s_tau upper bound tau. Upper bound tau prior_tau \"uniform\". d_tau Positive numeric length 1. Degrees freedom Student t prior tau prior_tau \"half_t\". prior_tau Character string, name prior tau. prior_tau equals \"uniform\", prior tau uniform prior lower bound 0 upper bound s_tau. prior_tau equals \"half_t\", prior tau half Student-t prior center 0, lower bound 0, scale parameter s_tau, degrees freedom d_tau. scale parameter s_tau analogous sigma parameter Student-t parameterization given https://mc-stan.org/docs/functions-reference/unbounded_continuous_distributions.html. # nolint alpha Numeric vector length 1 pooled mixture models length n_study independent hierarchical models. alpha vector control group mean parameters. alpha enters model multiplying $matrices$x_alpha (see return value). control group data one group column equal 1. delta Numeric vector length n_group - 1 treatment effect parameters. delta enters model multiplying $matrices$x_delta (see return value). control (non-treatment) group data one group column equal 1. beta Numeric vector n_study * (n_continuous + n_binary) fixed effect parameters. Within study, first n_continuous betas continuous covariates, rest binary covariates. betas one study appear betas next study, studies arranged increasing order sorted unique values $data$study output. betas enters model multiplying $matrices$x_alpha (see return value). sigma Numeric vector n_study study-specific residual standard deviations. mu Numeric length 1, mean control group means alpha. tau Numeric length 1, standard deviation control group means alpha.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_hierarchical.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Non-longitudinal hierarchical simulations. — hb_sim_hierarchical","text":"list following elements: data: tidy long-form dataset patient-level data. one row per patient indicator columns study, group (e.g. treatment arm), patient ID. response columns patient response. columns baseline covariates. control group one group column equal 1, current study (non-historical) one maximum value study column. current study non-control-group patients, historical studies control group. parameters: named list model parameter values. See model specification vignette details. matrices: named list model matrices. See model specification vignette details.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_hierarchical.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Non-longitudinal hierarchical simulations. — hb_sim_hierarchical","text":"","code":"hb_sim_hierarchical()$data #> # A tibble: 700 × 4 #>    study group patient response #>    <int> <int>   <int>    <dbl> #>  1     1     1       1     1.96 #>  2     1     1       2     2.09 #>  3     1     1       3     1.82 #>  4     1     1       4     2.18 #>  5     1     1       5     2.31 #>  6     1     1       6     2.30 #>  7     1     1       7     2.38 #>  8     1     1       8     2.26 #>  9     1     1       9     2.13 #> 10     1     1      10     2.17 #> # ℹ 690 more rows"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_independent.html","id":null,"dir":"Reference","previous_headings":"","what":"Non-longitudinal independent simulations. — hb_sim_independent","title":"Non-longitudinal independent simulations. — hb_sim_independent","text":"Simulate non-longitudinal independent model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_independent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Non-longitudinal independent simulations. — hb_sim_independent","text":"","code":"hb_sim_independent(   n_study = 5,   n_group = 3,   n_patient = 100,   n_continuous = 0,   n_binary = 0,   s_alpha = 1,   s_delta = 1,   s_beta = 1,   s_sigma = 1,   alpha = stats::rnorm(n = n_study, mean = 0, sd = s_alpha),   delta = stats::rnorm(n = n_group - 1, mean = 0, sd = s_delta),   beta = stats::rnorm(n = n_study * (n_continuous + n_binary), mean = 0, sd = s_delta),   sigma = stats::runif(n = n_study, min = 0, max = s_sigma) )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_independent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Non-longitudinal independent simulations. — hb_sim_independent","text":"n_study Number studies simulate. n_group Number groups (e.g. study arms) simulate per study. n_patient Number patients simulate per study per group. n_continuous Number continuous covariates simulate (independent standard normal distributions). n_binary Number binary covariates simulate (independent Bernoulli distributions p = 0.5). s_alpha Numeric length 1, prior standard deviation study-specific control group mean parameters alpha. s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. alpha Numeric vector length 1 pooled mixture models length n_study independent hierarchical models. alpha vector control group mean parameters. alpha enters model multiplying $matrices$x_alpha (see return value). control group data one group column equal 1. delta Numeric vector length n_group - 1 treatment effect parameters. delta enters model multiplying $matrices$x_delta (see return value). control (non-treatment) group data one group column equal 1. beta Numeric vector n_study * (n_continuous + n_binary) fixed effect parameters. Within study, first n_continuous betas continuous covariates, rest binary covariates. betas one study appear betas next study, studies arranged increasing order sorted unique values $data$study output. betas enters model multiplying $matrices$x_alpha (see return value). sigma Numeric vector n_study study-specific residual standard deviations.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_independent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Non-longitudinal independent simulations. — hb_sim_independent","text":"list following elements: data: tidy long-form dataset patient-level data. one row per patient indicator columns study, group (e.g. treatment arm), patient ID. response columns patient response. columns baseline covariates. control group one group column equal 1, current study (non-historical) one maximum value study column. current study non-control-group patients, historical studies control group. parameters: named list model parameter values. See model specification vignette details. matrices: named list model matrices. See model specification vignette details.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_independent.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Non-longitudinal independent simulations. — hb_sim_independent","text":"","code":"hb_sim_independent()$data #> # A tibble: 700 × 4 #>    study group patient response #>    <int> <int>   <int>    <dbl> #>  1     1     1       1    1.43  #>  2     1     1       2    1.42  #>  3     1     1       3    1.17  #>  4     1     1       4    1.58  #>  5     1     1       5    1.93  #>  6     1     1       6    1.64  #>  7     1     1       7    1.05  #>  8     1     1       8    0.985 #>  9     1     1       9    1.77  #> 10     1     1      10    1.60  #> # ℹ 690 more rows"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_mixture.html","id":null,"dir":"Reference","previous_headings":"","what":"Non-longitudinal mixture simulations. — hb_sim_mixture","title":"Non-longitudinal mixture simulations. — hb_sim_mixture","text":"Simulate non-longitudinal mixture model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_mixture.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Non-longitudinal mixture simulations. — hb_sim_mixture","text":"","code":"hb_sim_mixture(   n_study = 5,   n_group = 3,   n_patient = 100,   n_continuous = 0,   n_binary = 0,   s_delta = 1,   s_beta = 1,   s_sigma = 1,   m_omega = 0,   s_omega = 1,   p_omega = 1/n_study,   alpha = omega[pi],   delta = stats::rnorm(n = n_group - 1, mean = 0, sd = s_delta),   beta = stats::rnorm(n = n_continuous + n_binary, mean = 0, sd = s_delta),   sigma = stats::runif(n = 1, min = 0, max = s_sigma),   pi = sample.int(n = n_study, size = 1, prob = p_omega),   omega = stats::rnorm(n = n_study, mean = m_omega, sd = s_omega) )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_mixture.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Non-longitudinal mixture simulations. — hb_sim_mixture","text":"n_study Number studies simulate. n_group Number groups (e.g. study arms) simulate per study. n_patient Number patients simulate per study per group. n_continuous Number continuous covariates simulate (independent standard normal distributions). n_binary Number binary covariates simulate (independent Bernoulli distributions p = 0.5). s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. m_omega Numeric length 1 n_study, prior control group mean study. length n_study, last element corresponds current study, others historical studies. s_omega Numeric length 1 n_study, prior control group standard deviation study. length n_study, last element corresponds current study, others historical studies. p_omega Numeric length n_study, prior mixture proportion study. length n_study, last element corresponds current study, others historical studies. alpha Numeric vector length 1 pooled mixture models length n_study independent hierarchical models. alpha vector control group mean parameters. alpha enters model multiplying $matrices$x_alpha (see return value). control group data one group column equal 1. delta Numeric vector length n_group - 1 treatment effect parameters. delta enters model multiplying $matrices$x_delta (see return value). control (non-treatment) group data one group column equal 1. beta Numeric vector n_continuous + n_binary fixed effect parameters. first n_continuous betas continuous covariates, rest binary covariates. betas enters model multiplying $matrices$x_alpha (see return value). sigma Numeric vector n_study study-specific residual standard deviations. pi Integer length 1, index mixture component randomly chosen alpha. omega Numeric length n_study, Candidate placebo mean parameters drawn mixture components.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_mixture.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Non-longitudinal mixture simulations. — hb_sim_mixture","text":"list following elements: data: tidy long-form dataset patient-level data. one row per patient indicator columns study, group (e.g. treatment arm), patient ID. response columns patient response. columns baseline covariates. control group one group column equal 1, current study (non-historical) one maximum value study column. current study non-control-group patients, historical studies control group. parameters: named list model parameter values. See model specification vignette details. matrices: named list model matrices. See model specification vignette details.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_mixture.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Non-longitudinal mixture simulations. — hb_sim_mixture","text":"","code":"hb_sim_mixture()$data #> # A tibble: 300 × 4 #>    study group patient response #>    <int> <int>   <int>    <dbl> #>  1     1     1       1    0.766 #>  2     1     1       2    0.470 #>  3     1     1       3    0.738 #>  4     1     1       4    1.42  #>  5     1     1       5    0.550 #>  6     1     1       6   -0.471 #>  7     1     1       7    0.354 #>  8     1     1       8    0.939 #>  9     1     1       9    0.657 #> 10     1     1      10    0.437 #> # ℹ 290 more rows"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_pool.html","id":null,"dir":"Reference","previous_headings":"","what":"Non-longitudinal pooled simulations. — hb_sim_pool","title":"Non-longitudinal pooled simulations. — hb_sim_pool","text":"Simulate non-longitudinal pooled model.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_pool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Non-longitudinal pooled simulations. — hb_sim_pool","text":"","code":"hb_sim_pool(   n_study = 5,   n_group = 3,   n_patient = 100,   n_continuous = 0,   n_binary = 0,   s_alpha = 1,   s_delta = 1,   s_beta = 1,   s_sigma = 1,   alpha = stats::rnorm(n = 1, mean = 0, sd = s_alpha),   delta = stats::rnorm(n = n_group - 1, mean = 0, sd = s_delta),   beta = stats::rnorm(n = n_study * (n_continuous + n_binary), mean = 0, sd = s_delta),   sigma = stats::runif(n = n_study, min = 0, max = s_sigma) )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_pool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Non-longitudinal pooled simulations. — hb_sim_pool","text":"n_study Number studies simulate. n_group Number groups (e.g. study arms) simulate per study. n_patient Number patients simulate per study per group. n_continuous Number continuous covariates simulate (independent standard normal distributions). n_binary Number binary covariates simulate (independent Bernoulli distributions p = 0.5). s_alpha Numeric length 1, prior standard deviation study-specific control group mean parameters alpha. s_delta Numeric length 1, prior standard deviation study--group effect parameters delta. s_beta Numeric length 1, prior standard deviation fixed effects beta. s_sigma Numeric length 1, prior upper bound residual standard deviations. alpha Numeric vector length 1 pooled mixture models length n_study independent hierarchical models. alpha vector control group mean parameters. alpha enters model multiplying $matrices$x_alpha (see return value). control group data one group column equal 1. delta Numeric vector length n_group - 1 treatment effect parameters. delta enters model multiplying $matrices$x_delta (see return value). control (non-treatment) group data one group column equal 1. beta Numeric vector n_study * (n_continuous + n_binary) fixed effect parameters. Within study, first n_continuous betas continuous covariates, rest binary covariates. betas one study appear betas next study, studies arranged increasing order sorted unique values $data$study output. betas enters model multiplying $matrices$x_alpha (see return value). sigma Numeric vector n_study study-specific residual standard deviations.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_pool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Non-longitudinal pooled simulations. — hb_sim_pool","text":"list following elements: data: tidy long-form dataset patient-level data. one row per patient indicator columns study, group (e.g. treatment arm), patient ID. response columns patient response. columns baseline covariates. control group one group column equal 1, current study (non-historical) one maximum value study column. current study non-control-group patients, historical studies control group. parameters: named list model parameter values. See model specification vignette details. matrices: named list model matrices. See model specification vignette details.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_sim_pool.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Non-longitudinal pooled simulations. — hb_sim_pool","text":"","code":"hb_sim_pool(n_continuous = 1)$data #> # A tibble: 700 × 9 #>    study group patient covariate_study1_continuous1 covariate_study2_continuous1 #>    <int> <int>   <int>                        <dbl>                        <dbl> #>  1     1     1       1                        0.749                            0 #>  2     1     1       2                       -0.104                            0 #>  3     1     1       3                       -1.78                             0 #>  4     1     1       4                       -0.748                            0 #>  5     1     1       5                        0.980                            0 #>  6     1     1       6                        1.92                             0 #>  7     1     1       7                       -0.558                            0 #>  8     1     1       8                        0.499                            0 #>  9     1     1       9                       -0.329                            0 #> 10     1     1      10                       -0.829                            0 #> # ℹ 690 more rows #> # ℹ 4 more variables: covariate_study3_continuous1 <dbl>, #> #   covariate_study4_continuous1 <dbl>, covariate_study5_continuous1 <dbl>, #> #   response <dbl>"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Model summary — hb_summary","title":"Model summary — hb_summary","text":"Summarize fitted model table.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Model summary — hb_summary","text":"","code":"hb_summary(   mcmc,   data,   response = \"response\",   study = \"study\",   study_reference = max(data[[study]]),   group = \"group\",   group_reference = min(data[[group]]),   patient = \"patient\",   covariates = grep(\"^covariate\", colnames(data), value = TRUE),   eoi = 0,   direction = \"<\" )"},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Model summary — hb_summary","text":"mcmc wide data frame posterior samples returned hb_mcmc_hierarchical() similar MCMC function. data Tidy data frame one row per patient, indicator columns response variable, study, group, patient, covariates. columns must atomic vectors (e.g. lists). data mixture simple models just one study, others data one study. simple model can used get historical data components m_omega s_omega mixture model. response Character length 1, name column data response/outcome variable. data[[response]] must continuous variable, change baseline clinical endpoint interest, opposed just raw response. Treatment differences computed directly scale, please supply change baseline unless absolutely certain treatment differences computed directly quantity clinically meaningful. study Character length 1, name column data study ID. study_reference Atomic length 1, element study column indicates current study. (studies historical studies.) group Character length 1, name column data group ID. group_reference Atomic length 1, element group column indicates control group. (groups may treatment groups.) patient Character length 1, name column data patient ID. covariates Character vector column names data columns baseline covariates. can continuous, categorical, binary. Regardless, historicalborrow derives appropriate model matrix. eoi Numeric length least 1, vector effects interest (EOIs) critical success factors (CSFs). direction Character length length(eoi) indicating compare treatment effect EOI. \">\" means Prob(treatment effect > EOI), \"<\" means Prob(treatment effect < EOI). elements direction must either \">\" \"<\".","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Model summary — hb_summary","text":"tidy data frame one row per group (e.g. treatment arm) columns following list. Unless otherwise specified, quantities calculated group level. calculated current (non-historical) study , others pertain combined dataset includes historical studies. mixture model exception data argument includes current study, quantities include historical information need borrow hb_summary() call one models. group: group label. data_mean: observed mean response specific current study. data_sd: observed standard deviation response specific current study. data_lower: lower bound simple frequentist 95% confidence interval observed mean specific current study. data_upper: upper bound simple frequentist 95% confidence interval observed mean specific current study. data_n: number non-missing observations combined dataset studies. data_N: total number observations (missing non-missing) combined dataset studies. data_n_study_*: number non-missing observations separately study. suffixes column names integer study indexes. Call dplyr::distinct(hb_data(your_data), study, study_label) see study labels correspond integer indexes. Note: combined dataset mixture model just current study. data_n_study_* results across studies desired, call hb_summary() different model (e.g. pooled). data_N_study_*: data_n_study_* except missing non-missing observations counted (total number observations). response_mean: Estimated posterior mean response model specific current study. Typically, raw response change baseline, case response_mean estimating change baseline. response_sd: Estimated posterior standard deviation mean response model specific current study. response_variance: Estimated posterior variance mean response model specific current study. response_lower: Lower bound 95% posterior interval mean response model specific current study. response_upper: Upper bound 95% posterior interval mean response model specific current study. response_mean_mcse: Monte Carlo standard error response_mean. response_sd_mcse: Monte Carlo standard error response_sd. response_lower_mcse: Monte Carlo standard error response_lower. response_upper_mcse: Monte Carlo standard error response_upper. diff_mean: Estimated treatment effect model specific current study. diff_lower: Lower bound 95% posterior interval treatment effect model specific current study.. diff_upper: Upper bound 95% posterior interval treatment effect model specific current study.. diff_mean_mcse: Monte Carlo standard error diff_mean. diff_lower_mcse: Monte Carlo standard error diff_lower. diff_upper_mcse: Monte Carlo standard error diff_upper. P(diff > EOI), P(diff < EOI): CSF probabilities treatment effect specified eoi direction arguments. Specific current study. effect_mean: Estimated posterior mean effect size (treatment difference divided residual standard deviation). Specific current study. effect_lower: Lower bound 95% posterior interval effect size model. Specific current study. effect_upper: Upper bound 95% posterior interval effect size model. Specific current study. precision_ratio: hierarchical model , model-based mean precision ratio. Specific current study. precision_ratio_lower: hierarchical model , lower bound model-based 95% posterior interval precision ratio. Specific current study. precision_ratio_upper: hierarchical model , upper bound model-based 95% posterior interval precision ratio. Specific current study. mix_prop_*: mixture model , posterior mixture proportions mixture components. last one current study first ones historical studies. suffixes column names integer study indexes. Call dplyr::distinct(hb_data(your_data), study, study_label) see study labels correspond integer indexes.","code":""},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_summary.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Model summary — hb_summary","text":"hb_summary() function post-processes results model. estimates marginal means response, treatment effect, quantities interest.","code":""},{"path":[]},{"path":"https://wlandau.github.io/historicalborrow/reference/hb_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Model summary — hb_summary","text":"","code":"if (!identical(Sys.getenv(\"HB_TEST\", unset = \"\"), \"\")) { data <- hb_sim_pool(n_continuous = 2)$data data$group <- sprintf(\"group%s\", data$group) mcmc <- hb_mcmc_pool(   data,   n_chains = 1,   n_adapt = 100,   n_warmup = 50,   n_iterations = 50 ) hb_summary(mcmc, data) }"},{"path":"https://wlandau.github.io/historicalborrow/reference/historicalborrow-package.html","id":null,"dir":"Reference","previous_headings":"","what":"historicalborrow: Bayesian historical borrowing models for clinical studies. — historicalborrow-package","title":"historicalborrow: Bayesian historical borrowing models for clinical studies. — historicalborrow-package","text":"Bayesian historical borrowing models clinical studies.","code":""},{"path":"https://wlandau.github.io/historicalborrow/news/index.html","id":"historicalborrow-110","dir":"Changelog","previous_headings":"","what":"historicalborrow 1.1.0","title":"historicalborrow 1.1.0","text":"Avoid aes_string(). Default half-Student-t priors hierarchical model MCMC simulation (#6). Use proportional averaging instead cell-level averaging estimating marginal means (#7). Add hb_ess(), supersedes hb_metrics() (#8).","code":""},{"path":"https://wlandau.github.io/historicalborrow/news/index.html","id":"historicalborrow-104","dir":"Changelog","previous_headings":"","what":"historicalborrow 1.0.4","title":"historicalborrow 1.0.4","text":"CRAN release: 2022-09-13 Fix DOI formatting DESCRIPTION file.","code":""},{"path":"https://wlandau.github.io/historicalborrow/news/index.html","id":"historicalborrow-103","dir":"Changelog","previous_headings":"","what":"historicalborrow 1.0.3","title":"historicalborrow 1.0.3","text":"First open-source release.","code":""},{"path":"https://wlandau.github.io/historicalborrow/news/index.html","id":"historicalborrow-102","dir":"Changelog","previous_headings":"","what":"historicalborrow 1.0.2","title":"historicalborrow 1.0.2","text":"Fix serious bug data confidence interval calculation hb_summary().","code":""},{"path":"https://wlandau.github.io/historicalborrow/news/index.html","id":"historicalborrow-101","dir":"Changelog","previous_headings":"","what":"historicalborrow 1.0.1","title":"historicalborrow 1.0.1","text":"Use n hb_s_tau() (#13). Remove missing patients n_study_current precision ratio (#14). Added NEWS.md file track changes package.","code":""}]
